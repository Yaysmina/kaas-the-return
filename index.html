<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaas: The Return</title>
    <link rel="stylesheet" href="./style.css">
    <script src="https://cdn.jsdelivr.net/npm/twemoji@latest/dist/twemoji.min.js"></script>
</head>
<body>
    <div id="game-container">
        <!-- Exact same structure as your original file -->
        <p id="playstyle-display" class="playstyle-indicator">Playstyle: Loading...</p>
        <header class="game-header">
            <h1>Kaas: The Return</h1>
            <div class="resource-display">
                <span class="resource"><span id="milk-display">0</span>ğŸ¥›</span>
                <span class="resource"><span id="gold-display">0</span>ğŸª™</span>
                <span class="resource" id="cow-cash-resource-display" style="display: none;"><span id="cow-cash-display">0</span>ğŸ’µ</span>
                <span class="resource" id="factory-funds-resource-display" style="display: none;"> | Factory Funds: <span id="factory-funds-display">0</span></span>
            </div>
        </header>

        <nav class="tab-navigation">
            <button class="tab-button active" data-tab="tab-farm">
                ğŸ§‘â€ğŸŒ¾
                <span class="raw-milk-count" id="farm-raw-milk-count"></span>
            </button>
            <button class="tab-button locked" data-tab="tab-business" data-unlock-condition="milk:2">
                ğŸª <span class="unlock-info">Need 2ğŸ¥›</span>
                <span class="customer-count" id="business-customer-count" style="display: none;"></span>
            </button>
            <button class="tab-button locked" data-tab="tab-upgrades" data-unlock-condition="cowCash:15">
                â« <span class="unlock-info">Need 15ğŸ’µ</span>
                <span class="upgrade-count" id="upgrades-count" style="display: none;"></span>
            </button>
             <button class="tab-button locked" data-tab="tab-factory" data-unlock-condition="cows:4">
                ğŸ­ <span class="unlock-info">Need 4ğŸ„</span>
            </button>
            <button class="tab-button" data-tab="tab-settings">âš™ï¸</button>
            <button class="tab-button" data-tab="tab-changelog">â“</button>
        </nav>

        <main class="tab-content-area">
            <!-- Farm Tab -->
            <div id="tab-farm" class="tab-pane active">
                <h2>Farm</h2>
                <div id="farm-cow-caring">
                    <h3>Cow Caring</h3>
                    <p>You currently have <span id="cows-count-farm">0</span>ğŸ„</p>
                    <button id="buy-cow-button" class="action">Buy Cow</button>
                    <span>Cost: <span id="effective-cow-cost-display">50</span>ğŸª™</span>
                </div>
                
                <hr id="farm-milk-hr" class="subsection-hr-locked" data-unlock-condition="cows:1">
                
                <div id="farm-milk-making" class="subsection-locked" data-unlock-condition="cows:1">
                    <span class="unlock-info subsection-unlock-info">Requires 1 Cow</span>
                    <h3>Milk Making</h3>
                    <p>Taps left: <span id="taps-left">0</span> / <span id="current-taps-per-cycle-display">0</span></p>
                    <div class="button-group">
                        <button id="make-raw-milk-button" class="action" disabled>Milk your Cows</button>
                        <button id="toggle-auto-tap-button" class="action auto-toggle-button" disabled>Auto-Tap Off</button>
                    </div>
                    <span>+<span id="cows-milk-yield">0</span> RawğŸ¥›each cycle</span>
                    <p>You have <span id="raw-milk-count">0</span> RawğŸ¥›</p>
                    <div class="button-group">
                        <button id="process-milk-button" class="action" disabled>Process <span id="effective-raw-milk-cost-display">10</span> RawğŸ¥›</button>
                        <button id="process-all-milk-button" class="action" style="display: none;">Process All</button>
                    </div>
                    <p>You have <span id="milk-count-farm">0</span>ğŸ¥›</p>
                </div>

                <hr id="farm-ripe-hr" class="subsection-hr-locked" data-unlock-condition="cows:7">
                <div id="farm-ripe-milk" class="subsection-locked" data-unlock-condition="cows:7">
                    <span class="unlock-info subsection-unlock-info">Requires 7 Cows</span>
                    <h3>Ripening Room</h3>
                    <p>Here will be the ability to make ripe milk.</p>
                </div>
            </div>

            <!-- Business Tab -->
            <div id="tab-business" class="tab-pane">
                <h2>Business</h2>
                <div id="business-milk-market">
                    <h3>Milk Market</h3>
                    <p>Sell ğŸ¥› to visiting Moms and Dads to earn ğŸª™ and ğŸ’µ</p>
                    <div id="customer-queue">
                        <!-- Customers and timer injected via JS -->
                    </div>
                </div>
                <hr id="business-cheese-hr" class="subsection-hr-locked" data-unlock-condition="cows:4">
                <div id="business-cheese-corner" class="subsection-locked" data-unlock-condition="cows:4">
                    <span class="unlock-info subsection-unlock-info">Requires 4 Cows (Factory)</span>
                    <h3>Cheese Corner</h3>
                    <p>Sell Cheese here.</p>
                </div>
                <hr id="business-gourmet-hr" class="subsection-hr-locked" data-unlock-condition="cows:7">
                <div id="business-gourmet-goods" class="subsection-locked" data-unlock-condition="cows:7">
                    <span class="unlock-info subsection-unlock-info">Requires 7 Cows (Premium Production)</span>
                    <h3>Gourmet Goods</h3>
                    <p>Sell Premium Cheese here.</p>
                </div>
            </div>

            <!-- Upgrades Tab -->
            <div id="tab-upgrades" class="tab-pane">
                <h2>Upgrades</h2>
                <div id="upgrades-cow-cash">
                    <h3>Cow Cash</h3>
                    <p>Spend ğŸ’µ to improve your farm's efficiency.</p>
                    <div class="upgrades-grid-container" id="cow-cash-upgrades-container">
                        <!-- Upgrades injected via JS -->
                    </div>
                </div>
                 <hr id="upgrades-factory-hr" class="subsection-hr-locked" data-unlock-condition="cows:4">
            </div>

            <!-- Factory Tab -->
            <div id="tab-factory" class="tab-pane">
                <h2>Factory</h2>
                <div id="factory-fresh">
                    <h3>Fresh Factory</h3>
                    <p>Process normal milk into cheese here.</p>
                </div>
                 <hr id="factory-premium-hr" class="subsection-hr-locked" data-unlock-condition="cows:7">
                <div id="factory-premium-production" class="subsection-locked" data-unlock-condition="cows:7">
                    <span class="unlock-info subsection-unlock-info">Requires 7 Cows (Ripe Milk)</span>
                    <h3>Premium Production</h3>
                    <p>Process ripe milk into premium cheese here.</p>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="tab-settings" class="tab-pane">
                <h2>Settings</h2>
                
                <div class="button-group">
                    <button id="btn-save" class="action">ğŸ’¾ Save Game</button>
                    <button id="btn-load" class="action">ğŸ“‚ Load Game</button>
                    <button id="btn-toggle-autosave" class="action">ğŸ”„ Enable Autosave (30s)</button>
                    <button id="btn-delete-progress" class="action danger-button">ğŸ—‘ï¸ Delete Progress</button>
                </div>
                
                <div id="save-info" class="save-info"></div>
            </div>
            
            <!-- Changelog Tab -->
            <div id="tab-changelog" class="tab-pane">
                <h2>Changelog</h2>

                <div class="changelog-version">
                    <p> 31 Dec 2025</p>
                    <h3>Version 0.3.4: User Experience</h3>
                    <ul>
                        <li>ğŸ› ï¸ Implemented Save and Load system</li>
                        <li>ğŸ› ï¸ Tab buttons now display useful information</li>
                        <li>ğŸ› ï¸ Emojis now work properly on all platforms</li>
                        <li>ğŸ› ï¸ Tab buttons are now mobile friendly</li>
                    </ul>
                </div>

                <div class="changelog-version">
                    <p> 12 Dec 2025</p>
                    <h3>Version 0.3.3: Emoji UpdateğŸ¤¯</h3>
                    <ul>
                        <li>ğŸ› ï¸ Added emojis to make the game look better</li>
                        <li>ğŸ› ï¸ Improved Milk Market appearance</li>
                    </ul>
                </div>

                <div class="changelog-version">
                    <p> 9 Dec 2025</p>
                    <h3>Version 0.3.2: Code Refactor</h3>
                    <ul>
                        <li>â• Milk Market waiting times improved again</li>
                        <li>ğŸ› ï¸ Codebase completely refactored</li>
                    </ul>
                </div>

                <div class="changelog-version">
                    <p> 26 Apr 2025</p>
                    <h3>Version 0.3.1: Balancing and Bugfixes</h3>
                    <ul>
                        <li>ğŸ†• Unlock "Process All" unlocking the Factory</li>
                        <li>â• Milk Market customer generation improved</li>
                        <li>â• Dairy Dads milk amount scaling less random</li>
                        <li>â– Milk Mom reward scaling decreased</li>
                        <li>ğŸ› ï¸ Auto-Tap now works properly in active playstyle</li>
                        <li>ğŸ› ï¸ Subsection now unlock at the correct moment</li>
                    </ul>
                </div>

                <div class="changelog-version">
                    <p> 25 Apr 2025</p>
                    <h3>Version 0.3.0: Cow Cash Upgrades</h3>
                    <ul>
                        <li>ğŸ†• Cow Cash Upgrades</li>
                        <li>ğŸ†• The ability to choose a playstyle</li>
                        <li>â• Dairy Dads milk amount scaling less random</li>
                        <li>â• Dairy Dads rewards now scale</li>
                        <li>â• Decreased customer wait time</li>
                        <li>ğŸŸ° Dairy Dads appear more often</li>
                        <li>â– Increased Unlock Requirements</li>
                        <li>ğŸ› ï¸ "Sell x Milk" button now works properly</li>
                    </ul>
                </div>

                <div class="changelog-version">
                    <p> 23 Apr 2025</p>
                    <h3>Version 0.2.1: Balance Changes</h3>
                    <ul>
                        <li>â• Decreased customer wait time</li>
                        <li>â• Dairy Dads now also give a bit of Gold</li>
                        <li>â• Doubled Auto-Tap speed again</li>
                    </ul>
                </div>

                <div class="changelog-version">
                    <p> 23 Apr 2025</p>
                    <h3>Version 0.2.0: Milk Market</h3>
                    <ul>
                        <li>ğŸ†• the Milk Market</li>
                        <li>ğŸ†• Milk Moms</li>
                        <li>ğŸ†• Dairy Dads</li>
                        <li>â• Doubled Auto-Tap speed</li>
                    </ul>
                </div>
    
                <div class="changelog-version">
                    <p> 23 Apr 2025</p> 
                    <h3>Version 0.1.4: Changelog & Balancing</h3>
                    <ul>
                        <li>ğŸ†• Added Changelog tab</li>
                        <li>â• Lowered Cow cost to 25</li>
                        <li>â• Lowered Milk required to unlock Business tab to 2</li>
                        <li>â–Increased Raw Milk cost to 20</li>
                    </ul>
                </div>
    
                 <div class="changelog-version">
                    <p> 23 Apr 2025</p>
                    <h3>Version 0.1.3: Auto Tap</h3>
                    <ul>
                        <li>ğŸ†• Auto-Tap toggle button</li>
                    </ul>
                </div>
    
                <div class="changelog-version">
                    <p> 23 Apr 2025</p>
                    <h3>Version 0.1.2: Unlockables II</h3>
                    <ul>
                        <li>ğŸ› ï¸ Simplified unlockables code</li>
                        <li>ğŸ› ï¸ Changed locked item's visuals</li>
                    </ul>
                </div>

                <div class="changelog-version">
                    <p> 23 Apr 2025</p>
                    <h3>Version 0.1.1: Unlockables</h3>
                    <ul>
                        <li>ğŸ†• Tabs are now unlockable</li>
                        <li>ğŸ†• Subsections are now unlockable</li>
                    </ul>
                </div>

                <div class="changelog-version">
                    <p> 22 Apr 2025</p>
                    <h3>Version 0.1: First Release</h3>
                    <ul>
                        <li>ğŸ†• Tabs are added.</li>
                        <li>ğŸ†• Basic functionality is added</li>
                        <li>ğŸ†• Basic visuals are added</li>
                        <li>ğŸ†• Cows can be bought</li>
                        <li>ğŸ†• Raw milk can be gained</li>
                        <li>ğŸ†• Milk can be processed</li>
                    </ul>
                </div>
            </div>
            
        </main>

        <footer class="game-footer">
            <p>Yaysmina</p>
            <p>Version 0.3.4 - User Experience</p>
            <p>31 Dec 2025</p>
        </footer>
    </div>
    <!-- Point to the module -->
    <script type="module" src="./src/main.js"></script>
</body>
</html>